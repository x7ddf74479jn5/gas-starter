<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <base target="_top" />
    <link
      href="./global.css"
      rel="stylesheet"
    />
    <script>
      const forms = document.querySelectorAll("form");

      // Prevent forms from submitting.
      // ref. https://developers.google.com/apps-script/guides/html/communication#forms
      function preventFormSubmit() {
        forms.forEach((form) => {
          form.addEventListener("submit", (event) => {
            event.preventDefault();
          });
        });
      }
      window.addEventListener("load", preventFormSubmit);

      function onSuccess() {
        alert("Saved successfully")
      }

      function handleSubmit(formObject) {
        google.script.run
          .withSuccessHandler(onSuccess)
          .saveProperties(formObject);
      }
    </script>

  </head>
  <body>
    <div id="form">
      <form id="form" onsubmit="handleSubmit(this)">
        <div class="form-group">
          <div class="form-group-header">
            <label for="slack_webhook_url">Slack Webhook URL</label>
          </div>
          <div class="form-group-body">
            <input
              class="form-control input-block"
              type="text"
              id="slack_webhook_url"
              name="slack_webhook_url"
              value="<?= settings.slack_webhook_url ?>"
            />
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-primary" type="submit">Save</button>
        </div>
      </form>
    </div>
  </body>
</html>
